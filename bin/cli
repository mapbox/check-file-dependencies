#!/usr/bin/env node

var path = require('path');
var cfd = require('..');
var listCmd = require('./list');

var file = process.argv[2];

var list = file === '--list-deps' ? true : false;

if (list) {
  file = process.argv[3];
}

if (file === undefined) {
  console.log('Must supply a file');
}

if (file[0] !== '/') {
  file = path.join(process.cwd(), file);
}

if (list) {
  return listCmd(file);
}

cfd(file, function(err) {
  if (err === undefined) {
    return console.log('Dependencies are up to date');
  }
  console.log(err.message);
  process.exit(1);
});
